{% extends "admin_portal/base.html" %}

{% block title %}Changer mot de passe - Administration{% endblock %}

{% block content %}
<div class="container py-4">
    <div class="row">
        <div class="col-12">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="{% url 'admin_portal:dashboard' %}">Tableau de bord</a></li>
                    <li class="breadcrumb-item"><a href="{% url 'admin_portal:profile' %}">Mon Profil</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Changer mot de passe</li>
                </ol>
            </nav>
            <h1 class="mb-4"><i class="fas fa-key me-2"></i>Changer mot de passe</h1>
        </div>
    </div>

    <div class="row justify-content-center">
        <div class="col-md-8 col-lg-6">
            <div class="card border-0 shadow-sm">
                <div class="card-header bg-white">
                    <h5 class="mb-0">Modification du mot de passe</h5>
                </div>
                <div class="card-body">
                    <form method="post">
                        {% csrf_token %}

                        <div class="mb-3">
                            <label for="{{ form.old_password.id_for_label }}" class="form-label">Mot de passe
                                actuel</label>
                            {{ form.old_password }}
                            {% if form.old_password.errors %}
                            <div class="invalid-feedback d-block">
                                {{ form.old_password.errors }}
                            </div>
                            {% endif %}
                        </div>

                        <div class="mb-3">
                            <label for="{{ form.new_password1.id_for_label }}" class="form-label">Nouveau mot de
                                passe</label>
                            {{ form.new_password1 }}
                            {% if form.new_password1.errors %}
                            <div class="invalid-feedback d-block">
                                {{ form.new_password1.errors }}
                            </div>
                            {% endif %}
                            <div class="form-text">
                                <ul class="mb-0 ps-3 small">
                                    <li>Votre mot de passe ne peut pas être trop similaire à vos autres informations
                                        personnelles.</li>
                                    <li>Votre mot de passe doit contenir au moins 8 caractères.</li>
                                    <li>Votre mot de passe ne peut pas être un mot de passe couramment utilisé.</li>
                                    <li>Votre mot de passe ne peut pas être entièrement numérique.</li>
                                </ul>
                            </div>
                        </div>

                        <div class="mb-4">
                            <label for="{{ form.new_password2.id_for_label }}" class="form-label">Confirmer le nouveau
                                mot de passe</label>
                            {{ form.new_password2 }}
                            {% if form.new_password2.errors %}
                            <div class="invalid-feedback d-block">
                                {{ form.new_password2.errors }}
                            </div>
                            {% endif %}
                        </div>

                        <hr>

                        <div class="d-flex justify-content-between align-items-center">
                            <a href="{% url 'admin_portal:profile' %}" class="btn btn-outline-secondary">
                                <i class="fas fa-arrow-left me-2"></i>Retour au profil
                            </a>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save me-2"></i>Changer le mot de passe
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <div class="alert alert-info mt-4">
                <div class="d-flex">
                    <div class="me-3">
                        <i class="fas fa-info-circle fa-2x"></i>
                    </div>
                    <div>
                        <h5 class="alert-heading">Pourquoi changer régulièrement votre mot de passe?</h5>
                        <p class="mb-0">Pour assurer la sécurité de votre compte et des données du système, il est
                            recommandé de changer votre mot de passe régulièrement et de choisir un mot de passe fort,
                            différent de ceux que vous utilisez sur d'autres sites.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}